import{o as me,t as ge}from"../chunks/index.aeda84fa.js";import{S as Ne,a as De,I as B,g as Te,f as qe,b as we,c as ce,s as ee,i as ye,d as W,e as F,o as Be,P as Me,h as Xe}from"../chunks/singletons.1f9c74db.js";function Ye(t,n){return t==="/"||n==="ignore"?t:n==="never"?t.endsWith("/")?t.slice(0,-1):t:n==="always"&&!t.endsWith("/")?t+"/":t}function Ze(t){return t.split("%25").map(decodeURI).join("%25")}function et(t){for(const n in t)t[n]=decodeURIComponent(t[n]);return t}const tt=["href","pathname","search","searchParams","toString","toJSON"];function rt(t,n){const c=new URL(t);for(const s of tt)Object.defineProperty(c,s,{get(){return n(),t[s]},enumerable:!0,configurable:!0});return nt(c),c}function nt(t){Object.defineProperty(t,"hash",{get(){throw new Error("Cannot access event.url.hash. Consider using `$page.url.hash` inside a component instead")}})}const at="/__data.json";function ot(t){return t.replace(/\/$/,"")+at}function st(...t){let n=5381;for(const c of t)if(typeof c=="string"){let s=c.length;for(;s;)n=n*33^c.charCodeAt(--s)}else if(ArrayBuffer.isView(c)){const s=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);let h=s.length;for(;h;)n=n*33^s[--h]}else throw new TypeError("value must be a string or TypedArray");return(n>>>0).toString(36)}const Ve=window.fetch;window.fetch=(t,n)=>((t instanceof Request?t.method:(n==null?void 0:n.method)||"GET")!=="GET"&&te.delete(ve(t)),Ve(t,n));const te=new Map;function it(t){const n=atob(t),c=new Uint8Array(n.length);for(let s=0;s<n.length;s++)c[s]=n.charCodeAt(s);return c.buffer}function lt(t,n){const c=ve(t,n),s=document.querySelector(c);if(s!=null&&s.textContent){let{body:h,...d}=JSON.parse(s.textContent);const y=s.getAttribute("data-ttl");return y&&te.set(c,{body:h,init:d,ttl:1e3*Number(y)}),s.getAttribute("data-b64")!==null&&(h=it(h)),Promise.resolve(new Response(h,d))}return window.fetch(t,n)}function ct(t,n,c){if(te.size>0){const s=ve(t,c),h=te.get(s);if(h){if(performance.now()<h.ttl&&["default","force-cache","only-if-cached",void 0].includes(c==null?void 0:c.cache))return new Response(h.body,h.init);te.delete(s)}}return window.fetch(n,c)}function ve(t,n){let c=`script[data-sveltekit-fetched][data-url=${JSON.stringify(t instanceof Request?t.url:t)}]`;if(n!=null&&n.headers||n!=null&&n.body){const s=[];n.headers&&s.push([...new Headers(n.headers)].join(",")),n.body&&(typeof n.body=="string"||ArrayBuffer.isView(n.body))&&s.push(n.body),c+=`[data-hash="${st(...s)}"]`}return c}const ut=/^(\[)?(\.\.\.)?(\w+)(?:=(\w+))?(\])?$/;function dt(t){const n=[];return{pattern:t==="/"?/^\/$/:new RegExp(`^${pt(t).map(c=>{const s=/^\[\.\.\.(\w+)(?:=(\w+))?\]$/.exec(c);if(s)return n.push({name:s[1],matcher:s[2],optional:!1,rest:!0,chained:!0}),"(?:/(.*))?";const h=/^\[\[(\w+)(?:=(\w+))?\]\]$/.exec(c);if(h)return n.push({name:h[1],matcher:h[2],optional:!0,rest:!1,chained:!0}),"(?:/([^/]+))?";if(!c)return;const d=c.split(/\[(.+?)\](?!\])/);return"/"+d.map((y,u)=>{if(u%2){if(y.startsWith("x+"))return be(String.fromCharCode(parseInt(y.slice(2),16)));if(y.startsWith("u+"))return be(String.fromCharCode(...y.slice(2).split("-").map(A=>parseInt(A,16))));const g=ut.exec(y);if(!g)throw new Error(`Invalid param: ${y}. Params and matcher names can only have underscores and alphanumeric characters.`);const[,m,f,O,N]=g;return n.push({name:O,matcher:N,optional:!!m,rest:!!f,chained:f?u===1&&d[0]==="":!1}),f?"(.*?)":m?"([^/]*)?":"([^/]+?)"}return be(y)}).join("")}).join("")}/?$`),params:n}}function ft(t){return!/^\([^)]+\)$/.test(t)}function pt(t){return t.slice(1).split("/").filter(ft)}function ht(t,n,c){const s={},h=t.slice(1),d=h.filter(u=>u!==void 0);let y=0;for(let u=0;u<n.length;u+=1){const g=n[u];let m=h[u-y];if(g.chained&&g.rest&&y&&(m=h.slice(u-y,u+1).filter(f=>f).join("/"),y=0),m===void 0){g.rest&&(s[g.name]="");continue}if(!g.matcher||c[g.matcher](m)){s[g.name]=m;const f=n[u+1],O=h[u+1];f&&!f.rest&&f.optional&&O&&g.chained&&(y=0),!f&&!O&&Object.keys(s).length===d.length&&(y=0);continue}if(g.optional&&g.chained){y++;continue}return}if(!y)return s}function be(t){return t.normalize().replace(/[[\]]/g,"\\$&").replace(/%/g,"%25").replace(/\//g,"%2[Ff]").replace(/\?/g,"%3[Ff]").replace(/#/g,"%23").replace(/[.*+?^${}()|\\]/g,"\\$&")}function mt({nodes:t,server_loads:n,dictionary:c,matchers:s}){const h=new Set(n);return Object.entries(c).map(([u,[g,m,f]])=>{const{pattern:O,params:N}=dt(u),A={id:u,exec:T=>{const C=O.exec(T);if(C)return ht(C,N,s)},errors:[1,...f||[]].map(T=>t[T]),layouts:[0,...m||[]].map(y),leaf:d(g)};return A.errors.length=A.layouts.length=Math.max(A.errors.length,A.layouts.length),A});function d(u){const g=u<0;return g&&(u=~u),[g,t[u]]}function y(u){return u===void 0?u:[h.has(u),t[u]]}}function Fe(t){try{return JSON.parse(sessionStorage[t])}catch{}}function Je(t,n){const c=JSON.stringify(n);try{sessionStorage[t]=c}catch{}}const gt=-1,wt=-2,yt=-3,vt=-4,bt=-5,_t=-6;function Et(t,n){if(typeof t=="number")return h(t,!0);if(!Array.isArray(t)||t.length===0)throw new Error("Invalid input");const c=t,s=Array(c.length);function h(d,y=!1){if(d===gt)return;if(d===yt)return NaN;if(d===vt)return 1/0;if(d===bt)return-1/0;if(d===_t)return-0;if(y)throw new Error("Invalid input");if(d in s)return s[d];const u=c[d];if(!u||typeof u!="object")s[d]=u;else if(Array.isArray(u))if(typeof u[0]=="string"){const g=u[0],m=n==null?void 0:n[g];if(m)return s[d]=m(h(u[1]));switch(g){case"Date":s[d]=new Date(u[1]);break;case"Set":const f=new Set;s[d]=f;for(let A=1;A<u.length;A+=1)f.add(h(u[A]));break;case"Map":const O=new Map;s[d]=O;for(let A=1;A<u.length;A+=2)O.set(h(u[A]),h(u[A+1]));break;case"RegExp":s[d]=new RegExp(u[1],u[2]);break;case"Object":s[d]=Object(u[1]);break;case"BigInt":s[d]=BigInt(u[1]);break;case"null":const N=Object.create(null);s[d]=N;for(let A=1;A<u.length;A+=2)N[u[A]]=h(u[A+1]);break;default:throw new Error(`Unknown type ${g}`)}}else{const g=new Array(u.length);s[d]=g;for(let m=0;m<u.length;m+=1){const f=u[m];f!==wt&&(g[m]=h(f))}}else{const g={};s[d]=g;for(const m in u){const f=u[m];g[m]=h(f)}}return s[d]}return h(0)}function St(t){return t.filter(n=>n!=null)}const We=new Set(["load","prerender","csr","ssr","trailingSlash","config"]);[...We];const kt=new Set([...We]);[...kt];async function xt(t,n){var c;for(const s in t)if(typeof((c=t[s])==null?void 0:c.then)=="function")return Object.fromEntries(await Promise.all(Object.entries(t).map(async([h,d])=>[h,await d])));return t}class re{constructor(n,c){this.status=n,typeof c=="string"?this.body={message:c}:c?this.body=c:this.body={message:`Error: ${n}`}}toString(){return JSON.stringify(this.body)}}class Ge{constructor(n,c){this.status=n,this.location=c}}class At extends Error{constructor(n){super(),this.status=404,this.message=`Not found: ${n}`}}const Lt="x-sveltekit-invalidated",Pt="x-sveltekit-trailing-slash",G=Fe(Ne)??{},ne=Fe(De)??{};function _e(t){G[t]=ee()}function H(t){return location.href=t.href,new Promise(()=>{})}function Rt(t,n){var Ie;const c=mt(t),s=t.nodes[0],h=t.nodes[1];s(),h();const d=document.documentElement,y=[],u=[];let g=null;const m={before_navigate:[],on_navigate:[],after_navigate:[]};let f={branch:[],error:null,url:null},O=!1,N=!1,A=!0,T=!1,C=!1,D=!1,K=!1,M,U=(Ie=history.state)==null?void 0:Ie[B];U||(U=Date.now(),history.replaceState({...history.state,[B]:U},"",location.href));const ue=G[U];ue&&(history.scrollRestoration="manual",scrollTo(ue.x,ue.y));let J,z,Q;async function Se(){if(Q=Q||Promise.resolve(),await Q,!Q)return;Q=null;const e=new URL(location.href),i=Y(e,!0);g=null;const r=z={},o=i&&await pe(i);if(r===z&&o){if(o.type==="redirect")return ae(new URL(o.location,e).href,{},1,r);o.props.page!==void 0&&(J=o.props.page),M.$set(o.props)}}function ke(e){u.some(i=>i==null?void 0:i.snapshot)&&(ne[e]=u.map(i=>{var r;return(r=i==null?void 0:i.snapshot)==null?void 0:r.capture()}))}function xe(e){var i;(i=ne[e])==null||i.forEach((r,o)=>{var a,l;(l=(a=u[o])==null?void 0:a.snapshot)==null||l.restore(r)})}function Ae(){_e(U),Je(Ne,G),ke(U),Je(De,ne)}async function ae(e,{noScroll:i=!1,replaceState:r=!1,keepFocus:o=!1,state:a={},invalidateAll:l=!1},p,v){return typeof e=="string"&&(e=new URL(e,Te(document))),le({url:e,scroll:i?ee():null,keepfocus:o,redirect_count:p,details:{state:a,replaceState:r},nav_token:v,accepted:()=>{l&&(K=!0)},blocked:()=>{},type:"goto"})}async function Le(e){return g={id:e.id,promise:pe(e).then(i=>(i.type==="loaded"&&i.state.error&&(g=null),i))},g.promise}async function oe(...e){const i=c.filter(r=>e.some(o=>r.exec(o))).map(r=>Promise.all([...r.layouts,r.leaf].map(o=>o==null?void 0:o[1]())));await Promise.all(i)}function Pe(e){var o;f=e.state;const i=document.querySelector("style[data-sveltekit]");i&&i.remove(),J=e.props.page,M=new t.root({target:n,props:{...e.props,stores:W,components:u},hydrate:!0}),xe(U);const r={from:null,to:{params:f.params,route:{id:((o=f.route)==null?void 0:o.id)??null},url:new URL(location.href)},willUnload:!1,type:"enter",complete:Promise.resolve()};m.after_navigate.forEach(a=>a(r)),N=!0}async function X({url:e,params:i,branch:r,status:o,error:a,route:l,form:p}){let v="never";for(const S of r)(S==null?void 0:S.slash)!==void 0&&(v=S.slash);e.pathname=Ye(e.pathname,v),e.search=e.search;const b={type:"loaded",state:{url:e,params:i,branch:r,error:a,route:l},props:{constructors:St(r).map(S=>S.node.component)}};p!==void 0&&(b.props.form=p);let _={},P=!J,L=0;for(let S=0;S<Math.max(r.length,f.branch.length);S+=1){const E=r[S],w=f.branch[S];(E==null?void 0:E.data)!==(w==null?void 0:w.data)&&(P=!0),E&&(_={..._,...E.data},P&&(b.props[`data_${L}`]=_),L+=1)}return(!f.url||e.href!==f.url.href||f.error!==a||p!==void 0&&p!==J.form||P)&&(b.props.page={error:a,params:i,route:{id:(l==null?void 0:l.id)??null},status:o,url:new URL(e),form:p??null,data:P?_:J.data}),b}async function de({loader:e,parent:i,url:r,params:o,route:a,server_data_node:l}){var _,P,L;let p=null;const v={dependencies:new Set,params:new Set,parent:!1,route:!1,url:!1},b=await e();if((_=b.universal)!=null&&_.load){let S=function(...w){for(const $ of w){const{href:j}=new URL($,r);v.dependencies.add(j)}};const E={route:new Proxy(a,{get:(w,$)=>(v.route=!0,w[$])}),params:new Proxy(o,{get:(w,$)=>(v.params.add($),w[$])}),data:(l==null?void 0:l.data)??null,url:rt(r,()=>{v.url=!0}),async fetch(w,$){let j;w instanceof Request?(j=w.url,$={body:w.method==="GET"||w.method==="HEAD"?void 0:await w.blob(),cache:w.cache,credentials:w.credentials,headers:w.headers,integrity:w.integrity,keepalive:w.keepalive,method:w.method,mode:w.mode,redirect:w.redirect,referrer:w.referrer,referrerPolicy:w.referrerPolicy,signal:w.signal,...$}):j=w;const q=new URL(j,r);return S(q.href),q.origin===r.origin&&(j=q.href.slice(r.origin.length)),N?ct(j,q.href,$):lt(j,$)},setHeaders:()=>{},depends:S,parent(){return v.parent=!0,i()}};p=await b.universal.load.call(null,E)??null,p=p?await xt(p,a.id):null}return{node:b,loader:e,server:l,universal:(P=b.universal)!=null&&P.load?{type:"data",data:p,uses:v}:null,data:p??(l==null?void 0:l.data)??null,slash:r.pathname===F||r.pathname===F+"/"?"always":((L=b.universal)==null?void 0:L.trailingSlash)??(l==null?void 0:l.slash)}}function Re(e,i,r,o,a){if(K)return!0;if(!o)return!1;if(o.parent&&e||o.route&&i||o.url&&r)return!0;for(const l of o.params)if(a[l]!==f.params[l])return!0;for(const l of o.dependencies)if(y.some(p=>p(new URL(l))))return!0;return!1}function fe(e,i){return(e==null?void 0:e.type)==="data"?e:(e==null?void 0:e.type)==="skip"?i??null:null}async function pe({id:e,invalidating:i,url:r,params:o,route:a}){if((g==null?void 0:g.id)===e)return g.promise;const{errors:l,layouts:p,leaf:v}=a,b=[...p,v];l.forEach(k=>k==null?void 0:k().catch(()=>{})),b.forEach(k=>k==null?void 0:k[1]().catch(()=>{}));let _=null;const P=f.url?e!==f.url.pathname+f.url.search:!1,L=f.route?a.id!==f.route.id:!1;let S=!1;const E=b.map((k,R)=>{var V;const x=f.branch[R],I=!!(k!=null&&k[0])&&((x==null?void 0:x.loader)!==k[1]||Re(S,L,P,(V=x.server)==null?void 0:V.uses,o));return I&&(S=!0),I});if(E.some(Boolean)){try{_=await He(r,E)}catch(k){return se({status:k instanceof re?k.status:500,error:await Z(k,{url:r,params:o,route:{id:a.id}}),url:r,route:a})}if(_.type==="redirect")return _}const w=_==null?void 0:_.nodes;let $=!1;const j=b.map(async(k,R)=>{var V;if(!k)return;const x=f.branch[R],I=w==null?void 0:w[R];if((!I||I.type==="skip")&&k[1]===(x==null?void 0:x.loader)&&!Re($,L,P,(V=x.universal)==null?void 0:V.uses,o))return x;if($=!0,(I==null?void 0:I.type)==="error")throw I;return de({loader:k[1],url:r,params:o,route:a,parent:async()=>{var Oe;const Ce={};for(let he=0;he<R;he+=1)Object.assign(Ce,(Oe=await j[he])==null?void 0:Oe.data);return Ce},server_data_node:fe(I===void 0&&k[0]?{type:"skip"}:I??null,k[0]?x==null?void 0:x.server:void 0)})});for(const k of j)k.catch(()=>{});const q=[];for(let k=0;k<b.length;k+=1)if(b[k])try{q.push(await j[k])}catch(R){if(R instanceof Ge)return{type:"redirect",location:R.location};let x=500,I;if(w!=null&&w.includes(R))x=R.status??x,I=R.error;else if(R instanceof re)x=R.status,I=R.body;else{if(await W.updated.check())return await H(r);I=await Z(R,{params:o,url:r,route:{id:a.id}})}const V=await Ue(k,q,l);return V?await X({url:r,params:o,branch:q.slice(0,V.idx).concat(V.node),status:x,error:I,route:a}):await je(r,{id:a.id},I,x)}else q.push(void 0);return await X({url:r,params:o,branch:q,status:200,error:null,route:a,form:i?void 0:null})}async function Ue(e,i,r){for(;e--;)if(r[e]){let o=e;for(;!i[o];)o-=1;try{return{idx:o+1,node:{node:await r[e](),loader:r[e],data:{},server:null,universal:null}}}catch{continue}}}async function se({status:e,error:i,url:r,route:o}){const a={};let l=null;if(t.server_loads[0]===0)try{const b=await He(r,[!0]);if(b.type!=="data"||b.nodes[0]&&b.nodes[0].type!=="data")throw 0;l=b.nodes[0]??null}catch{(r.origin!==Be||r.pathname!==location.pathname||O)&&await H(r)}const p=await de({loader:s,url:r,params:a,route:o,parent:()=>Promise.resolve({}),server_data_node:fe(l)}),v={node:await h(),loader:h,universal:null,server:null,data:null};return await X({url:r,params:a,branch:[p,v],status:e,error:i,route:null})}function Y(e,i){if(ye(e,F))return;const r=ie(e);for(const o of c){const a=o.exec(r);if(a)return{id:e.pathname+e.search,invalidating:i,route:o,params:et(a),url:e}}}function ie(e){return Ze(e.pathname.slice(F.length)||"/")}function $e({url:e,type:i,intent:r,delta:o}){let a=!1;const l=ze(f,r,e,i);o!==void 0&&(l.navigation.delta=o);const p={...l.navigation,cancel:()=>{a=!0,l.reject(new Error("navigation was cancelled"))}};return C||m.before_navigate.forEach(v=>v(p)),a?null:l}async function le({url:e,scroll:i,keepfocus:r,redirect_count:o,details:a,type:l,delta:p,nav_token:v={},accepted:b,blocked:_}){var j,q,k;const P=Y(e,!1),L=$e({url:e,type:l,delta:p,intent:P});if(!L){_();return}const S=U;b(),C=!0,N&&W.navigating.set(L.navigation),z=v;let E=P&&await pe(P);if(!E){if(ye(e,F))return await H(e);E=await je(e,{id:null},await Z(new Error(`Not found: ${e.pathname}`),{url:e,params:{},route:{id:null}}),404)}if(e=(P==null?void 0:P.url)||e,z!==v)return L.reject(new Error("navigation was aborted")),!1;if(E.type==="redirect")if(o>=20)E=await se({status:500,error:await Z(new Error("Redirect loop"),{url:e,params:{},route:{id:null}}),url:e,route:{id:null}});else return ae(new URL(E.location,e).href,{},o+1,v),!1;else((j=E.props.page)==null?void 0:j.status)>=400&&await W.updated.check()&&await H(e);if(y.length=0,K=!1,T=!0,_e(S),ke(S),(q=E.props.page)!=null&&q.url&&E.props.page.url.pathname!==e.pathname&&(e.pathname=(k=E.props.page)==null?void 0:k.url.pathname),a){const R=a.replaceState?0:1;if(a.state[B]=U+=R,history[a.replaceState?"replaceState":"pushState"](a.state,"",e),!a.replaceState){let x=U+1;for(;ne[x]||G[x];)delete ne[x],delete G[x],x+=1}}if(g=null,N){f=E.state,E.props.page&&(E.props.page.url=e);const R=(await Promise.all(m.on_navigate.map(x=>x(L.navigation)))).filter(x=>typeof x=="function");if(R.length>0){let x=function(){m.after_navigate=m.after_navigate.filter(I=>!R.includes(I))};R.push(x),m.after_navigate.push(...R)}M.$set(E.props)}else Pe(E);const{activeElement:w}=document;if(await ge(),A){const R=e.hash&&document.getElementById(decodeURIComponent(e.hash.slice(1)));i?scrollTo(i.x,i.y):R?R.scrollIntoView():scrollTo(0,0)}const $=document.activeElement!==w&&document.activeElement!==document.body;!r&&!$&&Ee(),A=!0,E.props.page&&(J=E.props.page),C=!1,l==="popstate"&&xe(U),L.fulfil(void 0),m.after_navigate.forEach(R=>R(L.navigation)),W.navigating.set(null),T=!1}async function je(e,i,r,o){return e.origin===Be&&e.pathname===location.pathname&&!O?await se({status:o,error:r,url:e,route:i}):await H(e)}function Qe(){let e;d.addEventListener("mousemove",l=>{const p=l.target;clearTimeout(e),e=setTimeout(()=>{o(p,2)},20)});function i(l){o(l.composedPath()[0],1)}d.addEventListener("mousedown",i),d.addEventListener("touchstart",i,{passive:!0});const r=new IntersectionObserver(l=>{for(const p of l)p.isIntersecting&&(oe(ie(new URL(p.target.href))),r.unobserve(p.target))},{threshold:0});function o(l,p){const v=qe(l,d);if(!v)return;const{url:b,external:_,download:P}=we(v,F);if(_||P)return;const L=ce(v);if(!L.reload)if(p<=L.preload_data){const S=Y(b,!1);S&&Le(S)}else p<=L.preload_code&&oe(ie(b))}function a(){r.disconnect();for(const l of d.querySelectorAll("a")){const{url:p,external:v,download:b}=we(l,F);if(v||b)continue;const _=ce(l);_.reload||(_.preload_code===Me.viewport&&r.observe(l),_.preload_code===Me.eager&&oe(ie(p)))}}m.after_navigate.push(a),a()}function Z(e,i){return e instanceof re?e.body:t.hooks.handleError({error:e,event:i})??{message:i.route.id===null&&e instanceof At?"Not Found":"Internal Error"}}return{after_navigate:e=>{me(()=>(m.after_navigate.push(e),()=>{const i=m.after_navigate.indexOf(e);m.after_navigate.splice(i,1)}))},before_navigate:e=>{me(()=>(m.before_navigate.push(e),()=>{const i=m.before_navigate.indexOf(e);m.before_navigate.splice(i,1)}))},on_navigate:e=>{me(()=>(m.on_navigate.push(e),()=>{const i=m.on_navigate.indexOf(e);m.on_navigate.splice(i,1)}))},disable_scroll_handling:()=>{(T||!N)&&(A=!1)},goto:(e,i={})=>ae(e,i,0),invalidate:e=>{if(typeof e=="function")y.push(e);else{const{href:i}=new URL(e,location.href);y.push(r=>r.href===i)}return Se()},invalidate_all:()=>(K=!0,Se()),preload_data:async e=>{const i=new URL(e,Te(document)),r=Y(i,!1);if(!r)throw new Error(`Attempted to preload a URL that does not belong to this app: ${i}`);await Le(r)},preload_code:oe,apply_action:async e=>{if(e.type==="error"){const i=new URL(location.href),{branch:r,route:o}=f;if(!o)return;const a=await Ue(f.branch.length,r,o.errors);if(a){const l=await X({url:i,params:f.params,branch:r.slice(0,a.idx).concat(a.node),status:e.status??500,error:e.error,route:o});f=l.state,M.$set(l.props),ge().then(Ee)}}else e.type==="redirect"?ae(e.location,{invalidateAll:!0},0):(M.$set({form:null,page:{...J,form:e.data,status:e.status}}),await ge(),M.$set({form:e.data}),e.type==="success"&&Ee())},_start_router:()=>{var i;history.scrollRestoration="manual",addEventListener("beforeunload",r=>{let o=!1;if(Ae(),!C){const a=ze(f,void 0,null,"leave"),l={...a.navigation,cancel:()=>{o=!0,a.reject(new Error("navigation was cancelled"))}};m.before_navigate.forEach(p=>p(l))}o?(r.preventDefault(),r.returnValue=""):history.scrollRestoration="auto"}),addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&Ae()}),(i=navigator.connection)!=null&&i.saveData||Qe(),d.addEventListener("click",r=>{var L;if(r.button||r.which!==1||r.metaKey||r.ctrlKey||r.shiftKey||r.altKey||r.defaultPrevented)return;const o=qe(r.composedPath()[0],d);if(!o)return;const{url:a,external:l,target:p,download:v}=we(o,F);if(!a)return;if(p==="_parent"||p==="_top"){if(window.parent!==window)return}else if(p&&p!=="_self")return;const b=ce(o);if(!(o instanceof SVGAElement)&&a.protocol!==location.protocol&&!(a.protocol==="https:"||a.protocol==="http:")||v)return;if(l||b.reload){$e({url:a,type:"link"})?C=!0:r.preventDefault();return}const[_,P]=a.href.split("#");if(P!==void 0&&_===location.href.split("#")[0]){if(f.url.hash===a.hash){r.preventDefault(),(L=o.ownerDocument.getElementById(P))==null||L.scrollIntoView();return}if(D=!0,_e(U),e(a),!b.replace_state)return;D=!1,r.preventDefault()}le({url:a,scroll:b.noscroll?ee():null,keepfocus:b.keep_focus??!1,redirect_count:0,details:{state:{},replaceState:b.replace_state??a.href===location.href},accepted:()=>r.preventDefault(),blocked:()=>r.preventDefault(),type:"link"})}),d.addEventListener("submit",r=>{if(r.defaultPrevented)return;const o=HTMLFormElement.prototype.cloneNode.call(r.target),a=r.submitter;if(((a==null?void 0:a.formMethod)||o.method)!=="get")return;const l=new URL((a==null?void 0:a.hasAttribute("formaction"))&&(a==null?void 0:a.formAction)||o.action);if(ye(l,F))return;const p=r.target,{keep_focus:v,noscroll:b,reload:_,replace_state:P}=ce(p);if(_)return;r.preventDefault(),r.stopPropagation();const L=new FormData(p),S=a==null?void 0:a.getAttribute("name");S&&L.append(S,(a==null?void 0:a.getAttribute("value"))??""),l.search=new URLSearchParams(L).toString(),le({url:l,scroll:b?ee():null,keepfocus:v??!1,redirect_count:0,details:{state:{},replaceState:P??l.href===location.href},nav_token:{},accepted:()=>{},blocked:()=>{},type:"form"})}),addEventListener("popstate",async r=>{var o,a;if(z={},(o=r.state)==null?void 0:o[B]){if(r.state[B]===U)return;const l=G[r.state[B]],p=new URL(location.href);if(((a=f.url)==null?void 0:a.href.split("#")[0])===location.href.split("#")[0]){e(p),G[U]=ee(),U=r.state[B],scrollTo(l.x,l.y);return}const v=r.state[B]-U;await le({url:p,scroll:l,keepfocus:!1,redirect_count:0,details:null,accepted:()=>{U=r.state[B]},blocked:()=>{history.go(-v)},type:"popstate",delta:v,nav_token:z})}else if(!D){const l=new URL(location.href);e(l)}}),addEventListener("hashchange",()=>{D&&(D=!1,history.replaceState({...history.state,[B]:++U},"",location.href))});for(const r of document.querySelectorAll("link"))r.rel==="icon"&&(r.href=r.href);addEventListener("pageshow",r=>{r.persisted&&W.navigating.set(null)});function e(r){f.url=r,W.page.set({...J,url:r}),W.page.notify()}},_hydrate:async({status:e=200,error:i,node_ids:r,params:o,route:a,data:l,form:p})=>{O=!0;const v=new URL(location.href);({params:o={},route:a={id:null}}=Y(v,!1)||{});let b;try{const _=r.map(async(S,E)=>{const w=l[E];return w!=null&&w.uses&&(w.uses=Ke(w.uses)),de({loader:t.nodes[S],url:v,params:o,route:a,parent:async()=>{const $={};for(let j=0;j<E;j+=1)Object.assign($,(await _[j]).data);return $},server_data_node:fe(w)})}),P=await Promise.all(_),L=c.find(({id:S})=>S===a.id);if(L){const S=L.layouts;for(let E=0;E<S.length;E++)S[E]||P.splice(E,0,void 0)}b=await X({url:v,params:o,branch:P,status:e,error:i,form:p,route:L??null})}catch(_){if(_ instanceof Ge){await H(new URL(_.location,location.href));return}b=await se({status:_ instanceof re?_.status:500,error:await Z(_,{url:v,params:o,route:a}),url:v,route:a})}Pe(b)}}}async function He(t,n){var h;const c=new URL(t);c.pathname=ot(t.pathname),t.pathname.endsWith("/")&&c.searchParams.append(Pt,"1"),c.searchParams.append(Lt,n.map(d=>d?"1":"0").join(""));const s=await Ve(c.href);if((h=s.headers.get("content-type"))!=null&&h.includes("text/html")&&await H(t),!s.ok)throw new re(s.status,await s.json());return new Promise(async d=>{var O;const y=new Map,u=s.body.getReader(),g=new TextDecoder;function m(N){return Et(N,{Promise:A=>new Promise((T,C)=>{y.set(A,{fulfil:T,reject:C})})})}let f="";for(;;){const{done:N,value:A}=await u.read();if(N&&!f)break;for(f+=!A&&f?`
`:g.decode(A);;){const T=f.indexOf(`
`);if(T===-1)break;const C=JSON.parse(f.slice(0,T));if(f=f.slice(T+1),C.type==="redirect")return d(C);if(C.type==="data")(O=C.nodes)==null||O.forEach(D=>{(D==null?void 0:D.type)==="data"&&(D.uses=Ke(D.uses),D.data=m(D.data))}),d(C);else if(C.type==="chunk"){const{id:D,data:K,error:M}=C,U=y.get(D);y.delete(D),M?U.reject(m(M)):U.fulfil(m(K))}}}})}function Ke(t){return{dependencies:new Set((t==null?void 0:t.dependencies)??[]),params:new Set((t==null?void 0:t.params)??[]),parent:!!(t!=null&&t.parent),route:!!(t!=null&&t.route),url:!!(t!=null&&t.url)}}function Ee(){const t=document.querySelector("[autofocus]");if(t)t.focus();else{const n=document.body,c=n.getAttribute("tabindex");n.tabIndex=-1,n.focus({preventScroll:!0,focusVisible:!1}),c!==null?n.setAttribute("tabindex",c):n.removeAttribute("tabindex");const s=getSelection();if(s&&s.type!=="None"){const h=[];for(let d=0;d<s.rangeCount;d+=1)h.push(s.getRangeAt(d));setTimeout(()=>{if(s.rangeCount===h.length){for(let d=0;d<s.rangeCount;d+=1){const y=h[d],u=s.getRangeAt(d);if(y.commonAncestorContainer!==u.commonAncestorContainer||y.startContainer!==u.startContainer||y.endContainer!==u.endContainer||y.startOffset!==u.startOffset||y.endOffset!==u.endOffset)return}s.removeAllRanges()}})}}}function ze(t,n,c,s){var u,g;let h,d;const y=new Promise((m,f)=>{h=m,d=f});return y.catch(()=>{}),{navigation:{from:{params:t.params,route:{id:((u=t.route)==null?void 0:u.id)??null},url:t.url},to:c&&{params:(n==null?void 0:n.params)??null,route:{id:((g=n==null?void 0:n.route)==null?void 0:g.id)??null},url:c},willUnload:!n,type:s,complete:y},fulfil:h,reject:d}}async function Ut(t,n,c){const s=Rt(t,n);Xe({client:s}),c?await s._hydrate(c):s.goto(location.href,{replaceState:!0}),s._start_router()}export{Ut as start};
